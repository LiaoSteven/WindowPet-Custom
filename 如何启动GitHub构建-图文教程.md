# 🚀 如何启动 GitHub Actions 构建 - 图文教程

## 📍 你现在的情况

你已经上传了代码到 GitHub，现在要触发构建，但是页面要你选择 workflow（工作流）。

---

## 🎯 详细步骤（带截图说明）

### 第 1 步：进入 Actions 页面

1. 在你的 GitHub 仓库页面（就是你上传代码的那个页面）
2. 点击顶部的 **"Actions"** 标签

```
┌─────────────────────────────────────────────────────┐
│ < > Code    Issues    Pull requests    Actions  ... │  ← 点这里
└─────────────────────────────────────────────────────┘
```

---

### 第 2 步：选择 Workflow

进入 Actions 页面后，你会看到**左侧有一个列表**，显示所有可用的工作流：

```
Actions
┌──────────────────────────┐
│ All workflows         ▼  │
│                          │
│ ○ 手动构建 macOS 版本    │  ← 点击这个！
│ ○ Build/Release          │
│                          │
└──────────────────────────┘
```

**点击左侧的 "手动构建 macOS 版本"**

> **注意：** 中文名称可能显示为 "手动构建 macOS 版本" 或英文名称（取决于文件名）

---

### 第 3 步：运行 Workflow

点击后，右侧会显示一个蓝色按钮：

```
┌────────────────────────────────────────────┐
│  手动构建 macOS 版本                        │
│                                            │
│  This workflow has a workflow_dispatch     │
│  event trigger.                            │
│                                            │
│  [Run workflow ▼]  ← 点击这个蓝色按钮        │
└────────────────────────────────────────────┘
```

**点击右侧的 "Run workflow" 按钮**

---

### 第 4 步：配置构建选项

点击 "Run workflow" 后，会弹出一个小菜单：

```
┌─────────────────────────────────────────┐
│ Run workflow                            │
│                                         │
│ Use workflow from                       │
│ Branch: main                      [▼]   │
│                                         │
│ 选择构建目标 *                           │
│ [macos-m2                         ▼]   │  ← 选择这个
│                                         │
│      [Run workflow]                     │  ← 然后点这个
└─────────────────────────────────────────┘
```

1. **Branch（分支）**：保持 `main` 不变
2. **选择构建目标**：点击下拉菜单，选择 **`macos-m2`**（因为你是 MacBook Air M2）
3. 点击绿色的 **"Run workflow"** 按钮

---

### 第 5 步：等待构建

点击运行后：

1. 页面会刷新
2. 你会看到一个黄色圆圈 🟡 的构建任务
3. 任务名称可能是 "手动构建 macOS 版本"

```
┌────────────────────────────────────────────────────┐
│ 🟡 手动构建 macOS 版本 #1                          │
│    main                                            │
│    workflow_dispatch    just now                   │
└────────────────────────────────────────────────────┘
```

**等待 10-20 分钟**，黄色圆圈会变成：
- ✅ 绿色勾 = 构建成功
- ❌ 红色叉 = 构建失败（需要查看错误日志）

---

### 第 6 步：下载构建产物

当看到绿色勾 ✅ 时：

1. **点击**这个构建任务
2. 滚动到页面**底部**
3. 找到 **"Artifacts"**（构建产物）区域：

```
Artifacts
┌──────────────────────────────────────────┐
│ 📦 WindowPet-macOS-M2         [Download] │  ← 点击下载
│ 📦 WindowPet-macOS-M2-APP     [Download] │
└──────────────────────────────────────────┘
```

4. 点击 **"WindowPet-macOS-M2"** 旁边的下载链接
5. 会下载一个 ZIP 文件

---

## 🎁 下载后的操作

### 解压和安装

1. **解压 ZIP 文件**
   - Windows：右键 → 解压到当前文件夹
   - Mac：双击自动解压

2. **得到 DMG 文件**
   - 文件名类似：`WindowPet_0.0.9_aarch64.dmg`

3. **传输到 MacBook**
   - 用 U盘、AirDrop、网盘等方式传到 MacBook

4. **在 MacBook 上安装**
   - 双击 DMG 文件
   - 拖拽 WindowPet 到 Applications 文件夹
   - 关闭 DMG 窗口
   - 右键点击 DMG 图标 → 推出

5. **首次打开**
   - 打开 Finder（访达）→ Applications（应用程序）
   - 找到 WindowPet
   - **右键点击** → 选择 "打开"（不要双击！）
   - 在警告窗口点击 "打开"

---

## 📸 关键界面截图说明

### Actions 页面布局

```
GitHub 仓库页面
┌─────────────────────────────────────────────────────┐
│ < > Code    Issues    Pull requests    Actions      │ ← 顶部标签
├─────────────────────────────────────────────────────┤
│                                                      │
│ 左侧：Workflow 列表     │    右侧：运行按钮          │
│ ┌──────────────────┐   │  ┌──────────────────────┐ │
│ │ All workflows ▼  │   │  │ [Run workflow ▼]     │ │
│ │                  │   │  └──────────────────────┘ │
│ │ ○ 手动构建 macOS  │   │                          │
│ │ ○ Build/Release  │   │    最近的运行记录...       │
│ └──────────────────┘   │                          │
│                        │                          │
└─────────────────────────────────────────────────────┘
```

---

## ❓ 常见问题

### Q1: 找不到 "手动构建 macOS 版本"？

**可能的原因和解决方法：**

1. **文件没有上传成功**
   - 检查仓库里是否有 `.github/workflows/build-manual.yml` 文件
   - 如果没有，重新上传这个文件

2. **Actions 没有启用**
   - 第一次使用时，GitHub 会要求你启用 Actions
   - 点击 "I understand my workflows, go ahead and enable them"

3. **文件名或位置错误**
   - 确保文件路径是：`.github/workflows/build-manual.yml`
   - 注意：`.github` 前面有一个点

### Q2: 点击 "Run workflow" 没反应？

**解决方法：**
1. 刷新页面（按 F5）
2. 检查浏览器是否屏蔽了弹出窗口
3. 尝试用其他浏览器（Chrome、Edge、Firefox）

### Q3: 下拉菜单里没有 "macos-m2" 选项？

**可能显示的选项：**
- `macos-m2` ← 选这个（MacBook Air M2）
- `macos-intel` ← Intel Mac 用这个
- `all` ← 同时构建两个版本（时间加倍）

如果没有这些选项，检查 `build-manual.yml` 文件是否正确上传。

### Q4: 构建失败了（红色叉 ❌）？

**查看错误信息：**
1. 点击失败的构建任务
2. 点击红色 ❌ 的步骤
3. 查看错误日志
4. 截图发给我，我帮你分析

**常见错误：**
- **依赖安装失败**：网络问题，重新运行即可
- **编译错误**：代码有问题，需要修复
- **超时**：构建时间过长，GitHub 免费版限制

### Q5: 为什么我看到两个 workflow？

你会看到：
1. **手动构建 macOS 版本** ← 用这个！手动触发，简单方便
2. **Build/Release** ← 自动构建，需要打 tag 触发

建议使用第一个"手动构建"，更简单。

---

## 🔄 如果需要重新构建

比如你修改了代码或图片：

1. **上传新文件到 GitHub**
   - 在仓库页面点击 "Add file" → "Upload files"
   - 或者使用 Git 命令推送

2. **重复上述步骤**
   - Actions → 手动构建 macOS 版本 → Run workflow

3. **等待新的构建完成**

4. **下载新的安装包**

---

## 💡 小技巧

### 构建时可以做什么？

构建需要 10-20 分钟，这期间你可以：
- ✅ 关闭浏览器（构建在 GitHub 服务器上运行）
- ✅ 关机、睡眠（不影响构建）
- ✅ 做其他事情
- ❌ 不要删除仓库（会中断构建）

稍后回来刷新页面，检查是否完成。

### 如何加速构建？

1. **选择单个目标**
   - 只选 `macos-m2`，不要选 `all`
   - 可以节省一半时间

2. **删除旧的构建记录**
   - Actions 页面可以删除旧的运行记录
   - 释放存储空间

3. **使用缓存**
   - 第二次构建会更快（依赖已缓存）

---

## 🎯 完整流程回顾

```
1. 上传代码到 GitHub
        ↓
2. 进入 Actions 页面
        ↓
3. 点击左侧 "手动构建 macOS 版本"
        ↓
4. 点击右侧 "Run workflow"
        ↓
5. 选择 "macos-m2"
        ↓
6. 点击 "Run workflow" 开始构建
        ↓
7. 等待 10-20 分钟（黄色 → 绿色）
        ↓
8. 下载 Artifacts
        ↓
9. 解压得到 DMG
        ↓
10. 安装到 MacBook
```

---

## 📞 还是不行？

告诉我：
1. 你在第几步卡住了？
2. 页面显示什么内容？（截图最好）
3. 有什么错误提示吗？

我会立即帮你解决！

---

祝你顺利构建！🎉
